<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Strict//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>C:\Users\choi\git\1907-web\1907-web\WebContent\nodejs\begin\node_modules\raw-body\.README.md.html</title>


<style type="text/css">
body {
	color: #333;
	font: 13px/1.4 "Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif;
	padding: 0;
	margin: 0;
}

a {
	background: transparent;
	color: #4183c4;
	text-decoration: none;
}

a:active,
a:hover {
	outline: 0 none;
	text-decoration: underline;
}

abbr[title] {
	border-bottom: 1px dotted;
}

b,
strong {
	font-weight: bold;
}

dfn {
	font-style: italic;
}
h1 {
	font-size: 2em;
	margin: 0.67em 0;
}
mark {
	background: #ff0;
	color: #000;
}
small {
	font-size: 80%;
}
sub, sup {
	font-size: 75%;
	line-height: 0;
	position: relative;
	vertical-align: baseline;
}
sup {
	top: -0.5em;
}
sub {
	bottom: -0.25em;
}
img {
	border: 0 none;
}
svg:not(:root) {
	overflow: hidden;
}
figure {
	margin: 1em 40px;
}
hr {
	box-sizing: content-box;
	height: 0;
}

code,
kbd,
pre,
samp {
	font-family: monospace,monospace;
	font-size: 1em;
}

pre {
	overflow: auto;
	font: 12px Consolas,"Liberation Mono",Menlo,Courier,monospace;
	margin-bottom: 0;
	margin-top: 0;
}

.markdown-body {
	padding: 30px;
	font-size: 16px;
	line-height: 1.6;
	word-wrap: break-word;
}

.markdown-body>*:first-child {
	margin-top: 0 !important;
}

.markdown-body>*:last-child {
	margin-bottom: 0 !important;
}

.markdown-body .absent {
	color: #c00;
}

.markdown-body .anchor {
	position: absolute;
	top: 0;
	bottom: 0;
	left: 0;
	display: block;
	padding-right: 6px;
	padding-left: 30px;
	margin-left: -30px;
}

.markdown-body .anchor:focus {
	outline: none;
}

.markdown-body h1,
.markdown-body h2,
.markdown-body h3,
.markdown-body h4,
.markdown-body h5,
.markdown-body h6 {
	position: relative;
	margin-top: 1em;
	margin-bottom: 16px;
	font-weight: bold;
	line-height: 1.4;
}

.markdown-body h1 .octicon-link,
.markdown-body h2 .octicon-link,
.markdown-body h3 .octicon-link,
.markdown-body h4 .octicon-link,
.markdown-body h5 .octicon-link,
.markdown-body h6 .octicon-link {
	display: none;
	color: #000;
	vertical-align: middle;
}

.markdown-body h1:hover .anchor,
.markdown-body h2:hover .anchor,
.markdown-body h3:hover .anchor,
.markdown-body h4:hover .anchor,
.markdown-body h5:hover .anchor,
.markdown-body h6:hover .anchor {
	padding-left: 8px;
	margin-left: -30px;
	line-height: 1;
	text-decoration: none;
}

.markdown-body h1:hover .anchor .octicon-link,
.markdown-body h2:hover .anchor .octicon-link,
.markdown-body h3:hover .anchor .octicon-link,
.markdown-body h4:hover .anchor .octicon-link,
.markdown-body h5:hover .anchor .octicon-link,
.markdown-body h6:hover .anchor .octicon-link {
	display: inline-block;
}

.markdown-body h1 tt,
.markdown-body h1 code,
.markdown-body h2 tt,
.markdown-body h2 code,
.markdown-body h3 tt,
.markdown-body h3 code,
.markdown-body h4 tt,
.markdown-body h4 code,
.markdown-body h5 tt,
.markdown-body h5 code,
.markdown-body h6 tt,
.markdown-body h6 code {
	font-size: inherit;
}

.markdown-body h1 {
	padding-bottom: 0.3em;
	font-size: 2.25em;
	line-height: 1.2;
	border-bottom: 1px solid #eee;
}

.markdown-body h2 {
	padding-bottom: 0.3em;
	font-size: 1.75em;
	line-height: 1.225;
	border-bottom: 1px solid #eee;
}

.markdown-body h3 {
	font-size: 1.5em;
	line-height: 1.43;
}

.markdown-body h4 {
	font-size: 1.25em;
}

.markdown-body h5 {
	font-size: 1em;
}

.markdown-body h6 {
	font-size: 1em;
	color: #777;
}

.markdown-body p,.markdown-body blockquote,
.markdown-body ul,.markdown-body ol,
.markdown-body dl,.markdown-body table,
.markdown-body pre {
	margin-top: 0;
	margin-bottom: 16px;
}

.markdown-body hr {
	height: 4px;
	padding: 0;
	margin: 16px 0;
	background-color: #e7e7e7;
	border: 0 none;
}

.markdown-body ul,
.markdown-body ol {
	padding-left: 2em;
}

.markdown-body ul.no-list,
.markdown-body ol.no-list {
	padding: 0;
	list-style-type: none;
}

.markdown-body ul ul,
.markdown-body ul ol,
.markdown-body ol ol,
.markdown-body ol ul {
	margin-top: 0;
	margin-bottom: 0;
}

.markdown-body li>p {
	margin-top: 16px;
}

.markdown-body dl {
	padding: 0;
}

.markdown-body dl dt {
	padding: 0;
	margin-top: 16px;
	font-size: 1em;
	font-style: italic;
	font-weight: bold;
}

.markdown-body dl dd {
	padding: 0 16px;
	margin-bottom: 16px;
}

.markdown-body blockquote {
	padding: 0 15px;
	color: #777;
	border-left: 4px solid #ddd;
}

.markdown-body blockquote>:first-child {
	margin-top: 0;
}

.markdown-body blockquote>:last-child {
	margin-bottom: 0;
}

.markdown-body table {
	display: block;
	width: 100%;
	overflow: auto;
	word-break: normal;
	word-break: keep-all;
}

.markdown-body table th {
	font-weight: bold;
}

.markdown-body table th,
.markdown-body table td {
	padding: 6px 13px;
	border: 1px solid #ddd;
}

.markdown-body table tr {
	background-color: #fff;
	border-top: 1px solid #ccc;
}

.markdown-body table tr:nth-child(2n) {
	background-color: #f8f8f8;
}

.markdown-body img {
	max-width: 100%;
	-moz-box-sizing: border-box;
	box-sizing: border-box;
}

.markdown-body span.frame {
	display: block;
	overflow: hidden;
}

.markdown-body span.frame>span {
	display: block;
	float: left;
	width: auto;
	padding: 7px;
	margin: 13px 0 0;
	overflow: hidden;
	border: 1px solid #ddd;
}

.markdown-body span.frame span img {
	display: block;
	float: left;
}

.markdown-body span.frame span span {
	display: block;
	padding: 5px 0 0;
	clear: both;
	color: #333;
}

.markdown-body span.align-center {
	display: block;
	overflow: hidden;
	clear: both;
}

.markdown-body span.align-center>span {
	display: block;
	margin: 13px auto 0;
	overflow: hidden;
	text-align: center;
}

.markdown-body span.align-center span img {
	margin: 0 auto;
	text-align: center;
}

.markdown-body span.align-right {
	display: block;
	overflow: hidden;
	clear: both;
}

.markdown-body span.align-right>span {
	display: block;
	margin: 13px 0 0;
	overflow: hidden;
	text-align: right;
}

.markdown-body span.align-right span img {
	margin: 0;
	text-align: right;
}

.markdown-body span.float-left {
	display: block;
	float: left;
	margin-right: 13px;
	overflow: hidden;
}

.markdown-body span.float-left span {
	margin: 13px 0 0;
}

.markdown-body span.float-right {
	display: block;
	float: right;
	margin-left: 13px;
	overflow: hidden;
}

.markdown-body span.float-right>span {
	display: block;
	margin: 13px auto 0;
	overflow: hidden;
	text-align: right;
}

.markdown-body code,.markdown-body tt {
	padding: 0;
	padding-top: 0.2em;
	padding-bottom: 0.2em;
	margin: 0;
	font-size: 85%;
	background-color: rgba(0,0,0,0.04);
	border-radius: 3px;
}

.markdown-body code:before,
.markdown-body code:after,
.markdown-body tt:before,
.markdown-body tt:after {
	letter-spacing: -0.2em;
	content: "\00a0";
}

.markdown-body code br,
.markdown-body tt br {
	display: none;
}

.markdown-body del code {
	text-decoration: inherit;
}

.markdown-body pre>code {
	padding: 0;
	margin: 0;
	font-size: 100%;
	word-break: normal;
	white-space: pre;
	background: transparent;
	border: 0;
}

.markdown-body .highlight {
	margin-bottom: 16px;
}

.markdown-body .highlight pre,
.markdown-body pre {
	padding: 16px;
	overflow: auto;
	font-size: 85%;
	line-height: 1.45;
	background-color: #f7f7f7;
	border-radius: 3px;
}

.markdown-body .highlight pre {
	margin-bottom: 0;
	word-break: normal;
}

.markdown-body pre {
	word-wrap: normal;
}

.markdown-body pre code,
.markdown-body pre tt {
	display: inline;
	max-width: initial;
	padding: 0;
	margin: 0;
	overflow: initial;
	line-height: inherit;
	word-wrap: normal;
	background-color: transparent;
	border: 0;
}

.markdown-body pre code:before,
.markdown-body pre code:after,
.markdown-body pre tt:before,
.markdown-body pre tt:after {
	content: normal;
}

.highlight .pl-coc,
.highlight .pl-entl,
.highlight .pl-entm,
.highlight .pl-eoa,
.highlight .pl-mai .pl-sf,
.highlight .pl-mm,
.highlight .pl-pdv,
.highlight .pl-sc,
.highlight .pl-som,
.highlight .pl-sr,
.highlight .pl-v,
.highlight .pl-vpf {
	color: #0086b3;
}
.highlight .pl-eoac,
.highlight .pl-mdht,
.highlight .pl-mi1,
.highlight .pl-mri,
.highlight .pl-va,
.highlight .pl-vpu {
	color: #008080;
}
.highlight .pl-c,
.highlight .pl-pdc {
	color: #b4b7b4;
	font-style: italic;
}
.highlight .pl-k,
.highlight .pl-ko,
.highlight .pl-kolp,
.highlight .pl-mc,
.highlight .pl-mr,
.highlight .pl-ms,
.highlight .pl-s,
.highlight .pl-sok,
.highlight .pl-st {
	color: #6e5494;
}
.highlight .pl-ef,
.highlight .pl-enf,
.highlight .pl-enm,
.highlight .pl-entc,
.highlight .pl-eoi,
.highlight .pl-sf,
.highlight .pl-smc {
	color: #d12089;
}
.highlight .pl-ens,
.highlight .pl-eoai,
.highlight .pl-kos,
.highlight .pl-mh .pl-pdh,
.highlight .pl-mp,
.highlight .pl-pde,
.highlight .pl-stp {
	color: #458;
}
.highlight .pl-enti {
	color: #d12089;
	font-weight: bold;
}
.highlight .pl-cce,
.highlight .pl-enc,
.highlight .pl-kou,
.highlight .pl-mq {
	color: #f93;
}
.highlight .pl-mp1 .pl-sf {
	color: #458;
	font-weight: bold;
}
.highlight .pl-cos,
.highlight .pl-ent,
.highlight .pl-md,
.highlight .pl-mdhf,
.highlight .pl-ml,
.highlight .pl-pdc1,
.highlight .pl-pds,
.highlight .pl-s1,
.highlight .pl-scp,
.highlight .pl-sol {
	color: #df5000;
}
.highlight .pl-c1,
.highlight .pl-cn,
.highlight .pl-pse,
.highlight .pl-pse .pl-s2,
.highlight .pl-vi {
	color: #a31515;
}
.highlight .pl-mb,
.highlight .pl-pdb {
	color: #df5000;
	font-weight: bold;
}
.highlight .pl-mi,
.highlight .pl-pdi {
	color: #6e5494;
	font-style: italic;
}
.highlight .pl-ms1 {
	background-color: #f5f5f5;
}
.highlight .pl-mdh,
.highlight .pl-mdi {
	font-weight: bold;
}
.highlight .pl-mdr {
	color: #0086b3;
	font-weight: bold;
}
.highlight .pl-s2 {
	color: #333;
}
.highlight .pl-ii {
	background-color: #df5000;
	color: #fff;
}
.highlight .pl-ib {
	background-color: #f93;
}
.highlight .pl-id {
	background-color: #a31515;
	color: #fff;
}
.highlight .pl-iu {
	background-color: #b4b7b4;
}
.highlight .pl-mo {
	color: #969896;
}

</style>


<script type="text/javascript">

function getDocumentScrollTop() 
{
   var res = document.body.scrollTop || document.documentElement.scrollTop || window.pageYOffset || 0;
   // alert(res);
   return res;
}

function setDocumentScrollTop(ypos) 
{
	window.scrollTo(0, ypos);
}

</script>


</head>
<body class="markdown-body">
<h1> <a id="user-content-raw-body" class="anchor" href="#raw-body" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>raw-body</h1> 
<p><a href="https://npmjs.org/package/raw-body" rel="nofollow"><img src="https://camo.githubusercontent.com/ab8840a1eccd52b27d5a047e86d09669a458ddd5/68747470733a2f2f696d672e736869656c64732e696f2f6e706d2f762f7261772d626f64792e737667" alt="NPM Version" data-canonical-src="https://img.shields.io/npm/v/raw-body.svg" style="max-width:100%;" /></a> <a href="https://npmjs.org/package/raw-body" rel="nofollow"><img src="https://camo.githubusercontent.com/f6684eecf45f919249f64fa22a0e502cce8e7be4/68747470733a2f2f696d672e736869656c64732e696f2f6e706d2f646d2f7261772d626f64792e737667" alt="NPM Downloads" data-canonical-src="https://img.shields.io/npm/dm/raw-body.svg" style="max-width:100%;" /></a> <a href="https://nodejs.org/en/download/" rel="nofollow"><img src="https://camo.githubusercontent.com/abb3d7c22bd135fe67cb76136f37bb82760bb4ba/68747470733a2f2f696d672e736869656c64732e696f2f6e6f64652f762f7261772d626f64792e737667" alt="Node.js Version" data-canonical-src="https://img.shields.io/node/v/raw-body.svg" style="max-width:100%;" /></a> <a href="https://travis-ci.org/stream-utils/raw-body" rel="nofollow"><img src="https://camo.githubusercontent.com/d8376600d4dfd43515fba3dcd642bc82d1fc0d37/68747470733a2f2f696d672e736869656c64732e696f2f7472617669732f73747265616d2d7574696c732f7261772d626f64792f6d61737465722e737667" alt="Build status" data-canonical-src="https://img.shields.io/travis/stream-utils/raw-body/master.svg" style="max-width:100%;" /></a> <a href="https://coveralls.io/r/stream-utils/raw-body?branch=master" rel="nofollow"><img src="https://camo.githubusercontent.com/5c7576bde29c1e6cc438fcb82a1ee132ac55830c/68747470733a2f2f696d672e736869656c64732e696f2f636f766572616c6c732f73747265616d2d7574696c732f7261772d626f64792f6d61737465722e737667" alt="Test coverage" data-canonical-src="https://img.shields.io/coveralls/stream-utils/raw-body/master.svg" style="max-width:100%;" /></a></p> 
<p>Gets the entire buffer of a stream either as a <code>Buffer</code> or a string. Validates the stream's length against an expected length and maximum limit. Ideal for parsing request bodies.</p> 
<h2> <a id="user-content-install" class="anchor" href="#install" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Install</h2> 
<p>This is a <a href="https://nodejs.org/en/" rel="nofollow">Node.js</a> module available through the <a href="https://www.npmjs.com/" rel="nofollow">npm registry</a>. Installation is done using the <a href="https://docs.npmjs.com/getting-started/installing-npm-packages-locally" rel="nofollow"><code>npm install</code> command</a>:</p> 
<div class="highlight highlight-source-shell">
 <pre>$ npm install raw-body</pre>
</div> 
<h3> <a id="user-content-typescript" class="anchor" href="#typescript" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>TypeScript</h3> 
<p>This module includes a <a href="https://www.typescriptlang.org/" rel="nofollow">TypeScript</a> declaration file to enable auto complete in compatible editors and type information for TypeScript projects. This module depends on the Node.js types, so install <code>@types/node</code>:</p> 
<div class="highlight highlight-source-shell">
 <pre>$ npm install @types/node</pre>
</div> 
<h2> <a id="user-content-api" class="anchor" href="#api" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>API</h2> 
<div class="highlight highlight-source-js">
 <pre><span class="pl-k">var</span> getRawBody <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>raw-body<span class="pl-pds">'</span></span>)</pre>
</div> 
<h3> <a id="user-content-getrawbodystream-options-callback" class="anchor" href="#getrawbodystream-options-callback" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>getRawBody(stream, [options], [callback])</h3> 
<p><strong>Returns a promise if no callback specified and global <code>Promise</code> exists.</strong></p> 
<p>Options:</p> 
<ul> 
 <li> <code>length</code> - The length of the stream. If the contents of the stream do not add up to this length, an <code>400</code> error code is returned.</li> 
 <li> <code>limit</code> - The byte limit of the body. This is the number of bytes or any string format supported by <a href="https://www.npmjs.com/package/bytes" rel="nofollow">bytes</a>, for example <code>1000</code>, <code>'500kb'</code> or <code>'3mb'</code>. If the body ends up being larger than this limit, a <code>413</code> error code is returned.</li> 
 <li> <code>encoding</code> - The encoding to use to decode the body into a string. By default, a <code>Buffer</code> instance will be returned when no encoding is specified. Most likely, you want <code>utf-8</code>, so setting <code>encoding</code> to <code>true</code> will decode as <code>utf-8</code>. You can use any type of encoding supported by <a href="https://www.npmjs.org/package/iconv-lite#readme" rel="nofollow">iconv-lite</a>.</li> 
</ul> 
<p>You can also pass a string in place of options to just specify the encoding.</p> 
<p>If an error occurs, the stream will be paused, everything unpiped, and you are responsible for correctly disposing the stream. For HTTP requests, no handling is required if you send a response. For streams that use file descriptors, you should <code>stream.destroy()</code> or <code>stream.close()</code> to prevent leaks.</p> 
<h2> <a id="user-content-errors" class="anchor" href="#errors" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Errors</h2> 
<p>This module creates errors depending on the error condition during reading. The error may be an error from the underlying Node.js implementation, but is otherwise an error created by this module, which has the following attributes:</p> 
<ul> 
 <li> <code>limit</code> - the limit in bytes</li> 
 <li> <code>length</code> and <code>expected</code> - the expected length of the stream</li> 
 <li> <code>received</code> - the received bytes</li> 
 <li> <code>encoding</code> - the invalid encoding</li> 
 <li> <code>status</code> and <code>statusCode</code> - the corresponding status code for the error</li> 
 <li> <code>type</code> - the error type</li> 
</ul> 
<h3> <a id="user-content-types" class="anchor" href="#types" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Types</h3> 
<p>The errors from this module have a <code>type</code> property which allows for the progamatic determination of the type of error returned.</p> 
<h4> <a id="user-content-encodingunsupported" class="anchor" href="#encodingunsupported" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>encoding.unsupported</h4> 
<p>This error will occur when the <code>encoding</code> option is specified, but the value does not map to an encoding supported by the <a href="https://www.npmjs.org/package/iconv-lite#readme" rel="nofollow">iconv-lite</a> module.</p> 
<h4> <a id="user-content-entitytoolarge" class="anchor" href="#entitytoolarge" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>entity.too.large</h4> 
<p>This error will occur when the <code>limit</code> option is specified, but the stream has an entity that is larger.</p> 
<h4> <a id="user-content-requestaborted" class="anchor" href="#requestaborted" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>request.aborted</h4> 
<p>This error will occur when the request stream is aborted by the client before reading the body has finished.</p> 
<h4> <a id="user-content-requestsizeinvalid" class="anchor" href="#requestsizeinvalid" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>request.size.invalid</h4> 
<p>This error will occur when the <code>length</code> option is specified, but the stream has emitted more bytes.</p> 
<h4> <a id="user-content-streamencodingset" class="anchor" href="#streamencodingset" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>stream.encoding.set</h4> 
<p>This error will occur when the given stream has an encoding set on it, making it a decoded stream. The stream should not have an encoding set and is expected to emit <code>Buffer</code> objects.</p> 
<h2> <a id="user-content-examples" class="anchor" href="#examples" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Examples</h2> 
<h3> <a id="user-content-simple-express-example" class="anchor" href="#simple-express-example" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Simple Express example</h3> 
<div class="highlight highlight-source-js">
 <pre><span class="pl-k">var</span> contentType <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>content-type<span class="pl-pds">'</span></span>)
<span class="pl-k">var</span> express <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>express<span class="pl-pds">'</span></span>)
<span class="pl-k">var</span> getRawBody <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>raw-body<span class="pl-pds">'</span></span>)

<span class="pl-k">var</span> app <span class="pl-k">=</span> <span class="pl-en">express</span>()

<span class="pl-smi">app</span>.<span class="pl-en">use</span>(<span class="pl-k">function</span> (<span class="pl-smi">req</span>, <span class="pl-smi">res</span>, <span class="pl-smi">next</span>) {
  <span class="pl-en">getRawBody</span>(req, {
    length<span class="pl-k">:</span> <span class="pl-smi">req</span>.<span class="pl-c1">headers</span>[<span class="pl-s"><span class="pl-pds">'</span>content-length<span class="pl-pds">'</span></span>],
    limit<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>1mb<span class="pl-pds">'</span></span>,
    encoding<span class="pl-k">:</span> <span class="pl-smi">contentType</span>.<span class="pl-c1">parse</span>(req).<span class="pl-smi">parameters</span>.<span class="pl-c1">charset</span>
  }, <span class="pl-k">function</span> (<span class="pl-smi">err</span>, <span class="pl-smi">string</span>) {
    <span class="pl-k">if</span> (err) <span class="pl-k">return</span> <span class="pl-en">next</span>(err)
    <span class="pl-smi">req</span>.<span class="pl-c1">text</span> <span class="pl-k">=</span> string
    <span class="pl-en">next</span>()
  })
})

<span class="pl-c"><span class="pl-c">//</span> now access req.text</span></pre>
</div> 
<h3> <a id="user-content-simple-koa-example" class="anchor" href="#simple-koa-example" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Simple Koa example</h3> 
<div class="highlight highlight-source-js">
 <pre><span class="pl-k">var</span> contentType <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>content-type<span class="pl-pds">'</span></span>)
<span class="pl-k">var</span> getRawBody <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>raw-body<span class="pl-pds">'</span></span>)
<span class="pl-k">var</span> koa <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>koa<span class="pl-pds">'</span></span>)

<span class="pl-k">var</span> app <span class="pl-k">=</span> <span class="pl-en">koa</span>()

<span class="pl-smi">app</span>.<span class="pl-en">use</span>(<span class="pl-k">function</span> <span class="pl-k">*</span> (<span class="pl-smi">next</span>) {
  <span class="pl-c1">this</span>.<span class="pl-c1">text</span> <span class="pl-k">=</span> <span class="pl-k">yield</span> <span class="pl-en">getRawBody</span>(<span class="pl-c1">this</span>.<span class="pl-smi">req</span>, {
    length<span class="pl-k">:</span> <span class="pl-c1">this</span>.<span class="pl-smi">req</span>.<span class="pl-c1">headers</span>[<span class="pl-s"><span class="pl-pds">'</span>content-length<span class="pl-pds">'</span></span>],
    limit<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>1mb<span class="pl-pds">'</span></span>,
    encoding<span class="pl-k">:</span> <span class="pl-smi">contentType</span>.<span class="pl-c1">parse</span>(<span class="pl-c1">this</span>.<span class="pl-smi">req</span>).<span class="pl-smi">parameters</span>.<span class="pl-c1">charset</span>
  })
  <span class="pl-k">yield</span> next
})

<span class="pl-c"><span class="pl-c">//</span> now access this.text</span></pre>
</div> 
<h3> <a id="user-content-using-as-a-promise" class="anchor" href="#using-as-a-promise" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Using as a promise</h3> 
<p>To use this library as a promise, simply omit the <code>callback</code> and a promise is returned, provided that a global <code>Promise</code> is defined.</p> 
<div class="highlight highlight-source-js">
 <pre><span class="pl-k">var</span> getRawBody <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>raw-body<span class="pl-pds">'</span></span>)
<span class="pl-k">var</span> http <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>http<span class="pl-pds">'</span></span>)

<span class="pl-k">var</span> server <span class="pl-k">=</span> <span class="pl-smi">http</span>.<span class="pl-en">createServer</span>(<span class="pl-k">function</span> (<span class="pl-smi">req</span>, <span class="pl-smi">res</span>) {
  <span class="pl-en">getRawBody</span>(req)
    .<span class="pl-c1">then</span>(<span class="pl-k">function</span> (<span class="pl-smi">buf</span>) {
      <span class="pl-smi">res</span>.<span class="pl-smi">statusCode</span> <span class="pl-k">=</span> <span class="pl-c1">200</span>
      <span class="pl-smi">res</span>.<span class="pl-en">end</span>(<span class="pl-smi">buf</span>.<span class="pl-c1">length</span> <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">'</span> bytes submitted<span class="pl-pds">'</span></span>)
    })
    .<span class="pl-c1">catch</span>(<span class="pl-k">function</span> (<span class="pl-smi">err</span>) {
      <span class="pl-smi">res</span>.<span class="pl-smi">statusCode</span> <span class="pl-k">=</span> <span class="pl-c1">500</span>
      <span class="pl-smi">res</span>.<span class="pl-en">end</span>(<span class="pl-smi">err</span>.<span class="pl-smi">message</span>)
    })
})

<span class="pl-smi">server</span>.<span class="pl-en">listen</span>(<span class="pl-c1">3000</span>)</pre>
</div> 
<h3> <a id="user-content-using-with-typescript" class="anchor" href="#using-with-typescript" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Using with TypeScript</h3> 
<div class="highlight highlight-source-ts">
 <pre><span class="pl-k">import</span> <span class="pl-c1">*</span> <span class="pl-k">as</span> <span class="pl-smi">getRawBody</span> <span class="pl-k">from</span> <span class="pl-s"><span class="pl-pds">'</span>raw-body<span class="pl-pds">'</span></span>;
<span class="pl-k">import</span> <span class="pl-c1">*</span> <span class="pl-k">as</span> <span class="pl-smi">http</span> <span class="pl-k">from</span> <span class="pl-s"><span class="pl-pds">'</span>http<span class="pl-pds">'</span></span>;

<span class="pl-k"><span class="pl-k">const</span></span> server <span class="pl-k">=</span> <span class="pl-smi">http</span>.<span class="pl-en">createServer</span>((<span class="pl-v">req</span>, <span class="pl-v">res</span>) <span class="pl-k">=&gt;</span> {
  <span class="pl-en">getRawBody</span>(<span class="pl-smi">req</span>)
  .<span class="pl-c1">then</span>((<span class="pl-v">buf</span>) <span class="pl-k">=&gt;</span> {
    <span class="pl-smi">res</span>.<span class="pl-smi">statusCode</span> <span class="pl-k">=</span> <span class="pl-c1">200</span>;
    <span class="pl-smi">res</span>.<span class="pl-en">end</span>(<span class="pl-smi">buf</span>.<span class="pl-c1">length</span> <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">'</span> bytes submitted<span class="pl-pds">'</span></span>);
  })
  .<span class="pl-c1">catch</span>((<span class="pl-v">err</span>) <span class="pl-k">=&gt;</span> {
    <span class="pl-smi">res</span>.<span class="pl-smi">statusCode</span> <span class="pl-k">=</span> <span class="pl-smi">err</span>.<span class="pl-smi">statusCode</span>;
    <span class="pl-smi">res</span>.<span class="pl-en">end</span>(<span class="pl-smi">err</span>.<span class="pl-smi">message</span>);
  });
});

<span class="pl-smi">server</span>.<span class="pl-en">listen</span>(<span class="pl-c1">3000</span>);</pre>
</div> 
<h2> <a id="user-content-license" class="anchor" href="#license" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>License</h2> 
<p><a href=".LICENSE.md.html">MIT</a></p>
</body>
</html>
