<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Strict//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>C:\Users\choi\git\1907-web\1907-web\WebContent\nodejs\begin\node_modules\aws4\.README.md.html</title>


<style type="text/css">
body {
	color: #333;
	font: 13px/1.4 "Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif;
	padding: 0;
	margin: 0;
}

a {
	background: transparent;
	color: #4183c4;
	text-decoration: none;
}

a:active,
a:hover {
	outline: 0 none;
	text-decoration: underline;
}

abbr[title] {
	border-bottom: 1px dotted;
}

b,
strong {
	font-weight: bold;
}

dfn {
	font-style: italic;
}
h1 {
	font-size: 2em;
	margin: 0.67em 0;
}
mark {
	background: #ff0;
	color: #000;
}
small {
	font-size: 80%;
}
sub, sup {
	font-size: 75%;
	line-height: 0;
	position: relative;
	vertical-align: baseline;
}
sup {
	top: -0.5em;
}
sub {
	bottom: -0.25em;
}
img {
	border: 0 none;
}
svg:not(:root) {
	overflow: hidden;
}
figure {
	margin: 1em 40px;
}
hr {
	box-sizing: content-box;
	height: 0;
}

code,
kbd,
pre,
samp {
	font-family: monospace,monospace;
	font-size: 1em;
}

pre {
	overflow: auto;
	font: 12px Consolas,"Liberation Mono",Menlo,Courier,monospace;
	margin-bottom: 0;
	margin-top: 0;
}

.markdown-body {
	padding: 30px;
	font-size: 16px;
	line-height: 1.6;
	word-wrap: break-word;
}

.markdown-body>*:first-child {
	margin-top: 0 !important;
}

.markdown-body>*:last-child {
	margin-bottom: 0 !important;
}

.markdown-body .absent {
	color: #c00;
}

.markdown-body .anchor {
	position: absolute;
	top: 0;
	bottom: 0;
	left: 0;
	display: block;
	padding-right: 6px;
	padding-left: 30px;
	margin-left: -30px;
}

.markdown-body .anchor:focus {
	outline: none;
}

.markdown-body h1,
.markdown-body h2,
.markdown-body h3,
.markdown-body h4,
.markdown-body h5,
.markdown-body h6 {
	position: relative;
	margin-top: 1em;
	margin-bottom: 16px;
	font-weight: bold;
	line-height: 1.4;
}

.markdown-body h1 .octicon-link,
.markdown-body h2 .octicon-link,
.markdown-body h3 .octicon-link,
.markdown-body h4 .octicon-link,
.markdown-body h5 .octicon-link,
.markdown-body h6 .octicon-link {
	display: none;
	color: #000;
	vertical-align: middle;
}

.markdown-body h1:hover .anchor,
.markdown-body h2:hover .anchor,
.markdown-body h3:hover .anchor,
.markdown-body h4:hover .anchor,
.markdown-body h5:hover .anchor,
.markdown-body h6:hover .anchor {
	padding-left: 8px;
	margin-left: -30px;
	line-height: 1;
	text-decoration: none;
}

.markdown-body h1:hover .anchor .octicon-link,
.markdown-body h2:hover .anchor .octicon-link,
.markdown-body h3:hover .anchor .octicon-link,
.markdown-body h4:hover .anchor .octicon-link,
.markdown-body h5:hover .anchor .octicon-link,
.markdown-body h6:hover .anchor .octicon-link {
	display: inline-block;
}

.markdown-body h1 tt,
.markdown-body h1 code,
.markdown-body h2 tt,
.markdown-body h2 code,
.markdown-body h3 tt,
.markdown-body h3 code,
.markdown-body h4 tt,
.markdown-body h4 code,
.markdown-body h5 tt,
.markdown-body h5 code,
.markdown-body h6 tt,
.markdown-body h6 code {
	font-size: inherit;
}

.markdown-body h1 {
	padding-bottom: 0.3em;
	font-size: 2.25em;
	line-height: 1.2;
	border-bottom: 1px solid #eee;
}

.markdown-body h2 {
	padding-bottom: 0.3em;
	font-size: 1.75em;
	line-height: 1.225;
	border-bottom: 1px solid #eee;
}

.markdown-body h3 {
	font-size: 1.5em;
	line-height: 1.43;
}

.markdown-body h4 {
	font-size: 1.25em;
}

.markdown-body h5 {
	font-size: 1em;
}

.markdown-body h6 {
	font-size: 1em;
	color: #777;
}

.markdown-body p,.markdown-body blockquote,
.markdown-body ul,.markdown-body ol,
.markdown-body dl,.markdown-body table,
.markdown-body pre {
	margin-top: 0;
	margin-bottom: 16px;
}

.markdown-body hr {
	height: 4px;
	padding: 0;
	margin: 16px 0;
	background-color: #e7e7e7;
	border: 0 none;
}

.markdown-body ul,
.markdown-body ol {
	padding-left: 2em;
}

.markdown-body ul.no-list,
.markdown-body ol.no-list {
	padding: 0;
	list-style-type: none;
}

.markdown-body ul ul,
.markdown-body ul ol,
.markdown-body ol ol,
.markdown-body ol ul {
	margin-top: 0;
	margin-bottom: 0;
}

.markdown-body li>p {
	margin-top: 16px;
}

.markdown-body dl {
	padding: 0;
}

.markdown-body dl dt {
	padding: 0;
	margin-top: 16px;
	font-size: 1em;
	font-style: italic;
	font-weight: bold;
}

.markdown-body dl dd {
	padding: 0 16px;
	margin-bottom: 16px;
}

.markdown-body blockquote {
	padding: 0 15px;
	color: #777;
	border-left: 4px solid #ddd;
}

.markdown-body blockquote>:first-child {
	margin-top: 0;
}

.markdown-body blockquote>:last-child {
	margin-bottom: 0;
}

.markdown-body table {
	display: block;
	width: 100%;
	overflow: auto;
	word-break: normal;
	word-break: keep-all;
}

.markdown-body table th {
	font-weight: bold;
}

.markdown-body table th,
.markdown-body table td {
	padding: 6px 13px;
	border: 1px solid #ddd;
}

.markdown-body table tr {
	background-color: #fff;
	border-top: 1px solid #ccc;
}

.markdown-body table tr:nth-child(2n) {
	background-color: #f8f8f8;
}

.markdown-body img {
	max-width: 100%;
	-moz-box-sizing: border-box;
	box-sizing: border-box;
}

.markdown-body span.frame {
	display: block;
	overflow: hidden;
}

.markdown-body span.frame>span {
	display: block;
	float: left;
	width: auto;
	padding: 7px;
	margin: 13px 0 0;
	overflow: hidden;
	border: 1px solid #ddd;
}

.markdown-body span.frame span img {
	display: block;
	float: left;
}

.markdown-body span.frame span span {
	display: block;
	padding: 5px 0 0;
	clear: both;
	color: #333;
}

.markdown-body span.align-center {
	display: block;
	overflow: hidden;
	clear: both;
}

.markdown-body span.align-center>span {
	display: block;
	margin: 13px auto 0;
	overflow: hidden;
	text-align: center;
}

.markdown-body span.align-center span img {
	margin: 0 auto;
	text-align: center;
}

.markdown-body span.align-right {
	display: block;
	overflow: hidden;
	clear: both;
}

.markdown-body span.align-right>span {
	display: block;
	margin: 13px 0 0;
	overflow: hidden;
	text-align: right;
}

.markdown-body span.align-right span img {
	margin: 0;
	text-align: right;
}

.markdown-body span.float-left {
	display: block;
	float: left;
	margin-right: 13px;
	overflow: hidden;
}

.markdown-body span.float-left span {
	margin: 13px 0 0;
}

.markdown-body span.float-right {
	display: block;
	float: right;
	margin-left: 13px;
	overflow: hidden;
}

.markdown-body span.float-right>span {
	display: block;
	margin: 13px auto 0;
	overflow: hidden;
	text-align: right;
}

.markdown-body code,.markdown-body tt {
	padding: 0;
	padding-top: 0.2em;
	padding-bottom: 0.2em;
	margin: 0;
	font-size: 85%;
	background-color: rgba(0,0,0,0.04);
	border-radius: 3px;
}

.markdown-body code:before,
.markdown-body code:after,
.markdown-body tt:before,
.markdown-body tt:after {
	letter-spacing: -0.2em;
	content: "\00a0";
}

.markdown-body code br,
.markdown-body tt br {
	display: none;
}

.markdown-body del code {
	text-decoration: inherit;
}

.markdown-body pre>code {
	padding: 0;
	margin: 0;
	font-size: 100%;
	word-break: normal;
	white-space: pre;
	background: transparent;
	border: 0;
}

.markdown-body .highlight {
	margin-bottom: 16px;
}

.markdown-body .highlight pre,
.markdown-body pre {
	padding: 16px;
	overflow: auto;
	font-size: 85%;
	line-height: 1.45;
	background-color: #f7f7f7;
	border-radius: 3px;
}

.markdown-body .highlight pre {
	margin-bottom: 0;
	word-break: normal;
}

.markdown-body pre {
	word-wrap: normal;
}

.markdown-body pre code,
.markdown-body pre tt {
	display: inline;
	max-width: initial;
	padding: 0;
	margin: 0;
	overflow: initial;
	line-height: inherit;
	word-wrap: normal;
	background-color: transparent;
	border: 0;
}

.markdown-body pre code:before,
.markdown-body pre code:after,
.markdown-body pre tt:before,
.markdown-body pre tt:after {
	content: normal;
}

.highlight .pl-coc,
.highlight .pl-entl,
.highlight .pl-entm,
.highlight .pl-eoa,
.highlight .pl-mai .pl-sf,
.highlight .pl-mm,
.highlight .pl-pdv,
.highlight .pl-sc,
.highlight .pl-som,
.highlight .pl-sr,
.highlight .pl-v,
.highlight .pl-vpf {
	color: #0086b3;
}
.highlight .pl-eoac,
.highlight .pl-mdht,
.highlight .pl-mi1,
.highlight .pl-mri,
.highlight .pl-va,
.highlight .pl-vpu {
	color: #008080;
}
.highlight .pl-c,
.highlight .pl-pdc {
	color: #b4b7b4;
	font-style: italic;
}
.highlight .pl-k,
.highlight .pl-ko,
.highlight .pl-kolp,
.highlight .pl-mc,
.highlight .pl-mr,
.highlight .pl-ms,
.highlight .pl-s,
.highlight .pl-sok,
.highlight .pl-st {
	color: #6e5494;
}
.highlight .pl-ef,
.highlight .pl-enf,
.highlight .pl-enm,
.highlight .pl-entc,
.highlight .pl-eoi,
.highlight .pl-sf,
.highlight .pl-smc {
	color: #d12089;
}
.highlight .pl-ens,
.highlight .pl-eoai,
.highlight .pl-kos,
.highlight .pl-mh .pl-pdh,
.highlight .pl-mp,
.highlight .pl-pde,
.highlight .pl-stp {
	color: #458;
}
.highlight .pl-enti {
	color: #d12089;
	font-weight: bold;
}
.highlight .pl-cce,
.highlight .pl-enc,
.highlight .pl-kou,
.highlight .pl-mq {
	color: #f93;
}
.highlight .pl-mp1 .pl-sf {
	color: #458;
	font-weight: bold;
}
.highlight .pl-cos,
.highlight .pl-ent,
.highlight .pl-md,
.highlight .pl-mdhf,
.highlight .pl-ml,
.highlight .pl-pdc1,
.highlight .pl-pds,
.highlight .pl-s1,
.highlight .pl-scp,
.highlight .pl-sol {
	color: #df5000;
}
.highlight .pl-c1,
.highlight .pl-cn,
.highlight .pl-pse,
.highlight .pl-pse .pl-s2,
.highlight .pl-vi {
	color: #a31515;
}
.highlight .pl-mb,
.highlight .pl-pdb {
	color: #df5000;
	font-weight: bold;
}
.highlight .pl-mi,
.highlight .pl-pdi {
	color: #6e5494;
	font-style: italic;
}
.highlight .pl-ms1 {
	background-color: #f5f5f5;
}
.highlight .pl-mdh,
.highlight .pl-mdi {
	font-weight: bold;
}
.highlight .pl-mdr {
	color: #0086b3;
	font-weight: bold;
}
.highlight .pl-s2 {
	color: #333;
}
.highlight .pl-ii {
	background-color: #df5000;
	color: #fff;
}
.highlight .pl-ib {
	background-color: #f93;
}
.highlight .pl-id {
	background-color: #a31515;
	color: #fff;
}
.highlight .pl-iu {
	background-color: #b4b7b4;
}
.highlight .pl-mo {
	color: #969896;
}

</style>


<script type="text/javascript">

function getDocumentScrollTop() 
{
   var res = document.body.scrollTop || document.documentElement.scrollTop || window.pageYOffset || 0;
   // alert(res);
   return res;
}

function setDocumentScrollTop(ypos) 
{
	window.scrollTo(0, ypos);
}

</script>


</head>
<body class="markdown-body">
<h2> <a id="user-content-aws4" class="anchor" href="#aws4" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>aws4</h2> 
<p><a href="http://travis-ci.org/mhart/aws4" rel="nofollow"><img src="https://camo.githubusercontent.com/b46c82e5652d67ffbae088750a0e466c8cff944b/68747470733a2f2f7365637572652e7472617669732d63692e6f72672f6d686172742f617773342e706e673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://secure.travis-ci.org/mhart/aws4.png?branch=master" style="max-width:100%;" /></a></p> 
<p>A small utility to sign vanilla Node.js http(s) request options using Amazon's <a href="http://docs.amazonwebservices.com/general/latest/gr/signature-version-4.html" rel="nofollow">AWS Signature Version 4</a>.</p> 
<p>If you want to sign and send AWS requests in a modern browser, or an environment like <a href="https://developers.cloudflare.com/workers/" rel="nofollow">Cloudflare Workers</a>, then check out <a href="https://github.com/mhart/aws4fetch">aws4fetch</a> – otherwise you can also bundle this library for use <a href=".\.browser.md.html">in the browser</a>.</p> 
<p>This signature is supported by nearly all Amazon services, including <a href="http://docs.aws.amazon.com/AmazonS3/latest/API/" rel="nofollow">S3</a>, <a href="http://docs.aws.amazon.com/AWSEC2/latest/APIReference/" rel="nofollow">EC2</a>, <a href="http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/API.html" rel="nofollow">DynamoDB</a>, <a href="http://docs.aws.amazon.com/kinesis/latest/APIReference/" rel="nofollow">Kinesis</a>, <a href="http://docs.aws.amazon.com/lambda/latest/dg/API_Reference.html" rel="nofollow">Lambda</a>, <a href="http://docs.aws.amazon.com/AWSSimpleQueueService/latest/APIReference/" rel="nofollow">SQS</a>, <a href="http://docs.aws.amazon.com/sns/latest/api/" rel="nofollow">SNS</a>, <a href="http://docs.aws.amazon.com/IAM/latest/APIReference/" rel="nofollow">IAM</a>, <a href="http://docs.aws.amazon.com/STS/latest/APIReference/" rel="nofollow">STS</a>, <a href="http://docs.aws.amazon.com/AmazonRDS/latest/APIReference/" rel="nofollow">RDS</a>, <a href="http://docs.aws.amazon.com/AmazonCloudWatch/latest/APIReference/" rel="nofollow">CloudWatch</a>, <a href="http://docs.aws.amazon.com/AmazonCloudWatchLogs/latest/APIReference/" rel="nofollow">CloudWatch Logs</a>, <a href="http://docs.aws.amazon.com/codedeploy/latest/APIReference/" rel="nofollow">CodeDeploy</a>, <a href="http://docs.aws.amazon.com/AmazonCloudFront/latest/APIReference/" rel="nofollow">CloudFront</a>, <a href="http://docs.aws.amazon.com/awscloudtrail/latest/APIReference/" rel="nofollow">CloudTrail</a>, <a href="http://docs.aws.amazon.com/AmazonElastiCache/latest/APIReference/" rel="nofollow">ElastiCache</a>, <a href="http://docs.aws.amazon.com/ElasticMapReduce/latest/API/" rel="nofollow">EMR</a>, <a href="http://docs.aws.amazon.com/amazonglacier/latest/dev/amazon-glacier-api.html" rel="nofollow">Glacier</a>, <a href="http://docs.aws.amazon.com/cloudsearch/latest/developerguide/APIReq.html" rel="nofollow">CloudSearch</a>, <a href="http://docs.aws.amazon.com/ElasticLoadBalancing/latest/APIReference/" rel="nofollow">Elastic Load Balancing</a>, <a href="http://docs.aws.amazon.com/elastictranscoder/latest/developerguide/api-reference.html" rel="nofollow">Elastic Transcoder</a>, <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/" rel="nofollow">CloudFormation</a>, <a href="http://docs.aws.amazon.com/elasticbeanstalk/latest/api/" rel="nofollow">Elastic Beanstalk</a>, <a href="http://docs.aws.amazon.com/storagegateway/latest/userguide/AWSStorageGatewayAPI.html" rel="nofollow">Storage Gateway</a>, <a href="http://docs.aws.amazon.com/datapipeline/latest/APIReference/" rel="nofollow">Data Pipeline</a>, <a href="http://docs.aws.amazon.com/directconnect/latest/APIReference/" rel="nofollow">Direct Connect</a>, <a href="http://docs.aws.amazon.com/redshift/latest/APIReference/" rel="nofollow">Redshift</a>, <a href="http://docs.aws.amazon.com/opsworks/latest/APIReference/" rel="nofollow">OpsWorks</a>, <a href="http://docs.aws.amazon.com/ses/latest/APIReference/" rel="nofollow">SES</a>, <a href="http://docs.aws.amazon.com/amazonswf/latest/apireference/" rel="nofollow">SWF</a>, <a href="http://docs.aws.amazon.com/AutoScaling/latest/APIReference/" rel="nofollow">AutoScaling</a>, <a href="http://docs.aws.amazon.com/mobileanalytics/latest/ug/server-reference.html" rel="nofollow">Mobile Analytics</a>, <a href="http://docs.aws.amazon.com/cognitoidentity/latest/APIReference/" rel="nofollow">Cognito Identity</a>, <a href="http://docs.aws.amazon.com/cognitosync/latest/APIReference/" rel="nofollow">Cognito Sync</a>, <a href="http://docs.aws.amazon.com/AmazonECS/latest/APIReference/" rel="nofollow">Container Service</a>, <a href="http://docs.aws.amazon.com/appstream/latest/developerguide/appstream-api-rest.html" rel="nofollow">AppStream</a>, <a href="http://docs.aws.amazon.com/kms/latest/APIReference/" rel="nofollow">Key Management Service</a>, <a href="http://docs.aws.amazon.com/config/latest/APIReference/" rel="nofollow">Config</a>, <a href="http://docs.aws.amazon.com/cloudhsm/latest/dg/api-ref.html" rel="nofollow">CloudHSM</a>, <a href="http://docs.aws.amazon.com/Route53/latest/APIReference/requests-rest.html" rel="nofollow">Route53</a> and <a href="http://docs.aws.amazon.com/Route53/latest/APIReference/requests-rpc.html" rel="nofollow">Route53 Domains</a>.</p> 
<p>Indeed, the only AWS services that <em>don't</em> support v4 as of 2014-12-30 are <a href="http://docs.aws.amazon.com/AWSImportExport/latest/DG/api-reference.html" rel="nofollow">Import/Export</a> and <a href="http://docs.aws.amazon.com/AmazonSimpleDB/latest/DeveloperGuide/SDB_API.html" rel="nofollow">SimpleDB</a> (they only support <a href="https://github.com/mhart/aws2">AWS Signature Version 2</a>).</p> 
<p>It also provides defaults for a number of core AWS headers and request parameters, making it very easy to query AWS services, or build out a fully-featured AWS library.</p> 
<h2> <a id="user-content-example" class="anchor" href="#example" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example</h2> 
<div class="highlight highlight-source-js">
 <pre><span class="pl-k">var</span> http  <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>http<span class="pl-pds">'</span></span>),
    https <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>https<span class="pl-pds">'</span></span>),
    aws4  <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>aws4<span class="pl-pds">'</span></span>)

<span class="pl-c"><span class="pl-c">//</span> given an options object you could pass to http.request</span>
<span class="pl-k">var</span> opts <span class="pl-k">=</span> {host<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>sqs.us-east-1.amazonaws.com<span class="pl-pds">'</span></span>, path<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>/?Action=ListQueues<span class="pl-pds">'</span></span>}

<span class="pl-c"><span class="pl-c">//</span> alternatively (as aws4 can infer the host):</span>
opts <span class="pl-k">=</span> {service<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>sqs<span class="pl-pds">'</span></span>, region<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>us-east-1<span class="pl-pds">'</span></span>, path<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>/?Action=ListQueues<span class="pl-pds">'</span></span>}

<span class="pl-c"><span class="pl-c">//</span> alternatively (as us-east-1 is default):</span>
opts <span class="pl-k">=</span> {service<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>sqs<span class="pl-pds">'</span></span>, path<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>/?Action=ListQueues<span class="pl-pds">'</span></span>}

<span class="pl-smi">aws4</span>.<span class="pl-en">sign</span>(opts) <span class="pl-c"><span class="pl-c">//</span> assumes AWS credentials are available in process.env</span>

<span class="pl-en">console</span>.<span class="pl-c1">log</span>(opts)
<span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">{</span>
<span class="pl-c">  host: 'sqs.us-east-1.amazonaws.com',</span>
<span class="pl-c">  path: '/?Action=ListQueues',</span>
<span class="pl-c">  headers: {</span>
<span class="pl-c">    Host: 'sqs.us-east-1.amazonaws.com',</span>
<span class="pl-c">    'X-Amz-Date': '20121226T061030Z',</span>
<span class="pl-c">    Authorization: 'AWS4-HMAC-SHA256 Credential=ABCDEF/20121226/us-east-1/sqs/aws4_request, ...'</span>
<span class="pl-c">  }</span>
<span class="pl-c">}</span>
<span class="pl-c"><span class="pl-c">*/</span></span>

<span class="pl-c"><span class="pl-c">//</span> we can now use this to query AWS using the standard node.js http API</span>
<span class="pl-smi">http</span>.<span class="pl-en">request</span>(opts, <span class="pl-k">function</span>(<span class="pl-smi">res</span>) { <span class="pl-smi">res</span>.<span class="pl-en">pipe</span>(<span class="pl-c1">process</span>.<span class="pl-smi">stdout</span>) }).<span class="pl-en">end</span>()
<span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span class="pl-c">&lt;ListQueuesResponse xmlns=&quot;http://queue.amazonaws.com/doc/2012-11-05/&quot;&gt;</span>
<span class="pl-c">...</span>
<span class="pl-c"><span class="pl-c">*/</span></span></pre>
</div> 
<h2> <a id="user-content-more-options" class="anchor" href="#more-options" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>More options</h2> 
<div class="highlight highlight-source-js">
 <pre><span class="pl-c"><span class="pl-c">//</span> you can also pass AWS credentials in explicitly (otherwise taken from process.env)</span>
<span class="pl-smi">aws4</span>.<span class="pl-en">sign</span>(opts, {accessKeyId<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>, secretAccessKey<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>})

<span class="pl-c"><span class="pl-c">//</span> can also add the signature to query strings</span>
<span class="pl-smi">aws4</span>.<span class="pl-en">sign</span>({service<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>s3<span class="pl-pds">'</span></span>, path<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>/my-bucket?X-Amz-Expires=12345<span class="pl-pds">'</span></span>, signQuery<span class="pl-k">:</span> <span class="pl-c1">true</span>})

<span class="pl-c"><span class="pl-c">//</span> create a utility function to pipe to stdout (with https this time)</span>
<span class="pl-k">function</span> <span class="pl-en">request</span>(<span class="pl-smi">o</span>) { <span class="pl-smi">https</span>.<span class="pl-en">request</span>(o, <span class="pl-k">function</span>(<span class="pl-smi">res</span>) { <span class="pl-smi">res</span>.<span class="pl-en">pipe</span>(<span class="pl-c1">process</span>.<span class="pl-smi">stdout</span>) }).<span class="pl-en">end</span>(<span class="pl-smi">o</span>.<span class="pl-c1">body</span> <span class="pl-k">||</span> <span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>) }

<span class="pl-c"><span class="pl-c">//</span> aws4 can infer the HTTP method if a body is passed in</span>
<span class="pl-c"><span class="pl-c">//</span> method will be POST and Content-Type: 'application/x-www-form-urlencoded; charset=utf-8'</span>
<span class="pl-en">request</span>(<span class="pl-smi">aws4</span>.<span class="pl-en">sign</span>({service<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>iam<span class="pl-pds">'</span></span>, body<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>Action=ListGroups&amp;Version=2010-05-08<span class="pl-pds">'</span></span>}))
<span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">&lt;ListGroupsResponse xmlns=&quot;https://iam.amazonaws.com/doc/2010-05-08/&quot;&gt;</span>
<span class="pl-c">...</span>
<span class="pl-c"><span class="pl-c">*/</span></span>

<span class="pl-c"><span class="pl-c">//</span> can specify any custom option or header as per usual</span>
<span class="pl-en">request</span>(<span class="pl-smi">aws4</span>.<span class="pl-en">sign</span>({
  service<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>dynamodb<span class="pl-pds">'</span></span>,
  region<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>ap-southeast-2<span class="pl-pds">'</span></span>,
  method<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>POST<span class="pl-pds">'</span></span>,
  path<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>/<span class="pl-pds">'</span></span>,
  headers<span class="pl-k">:</span> {
    <span class="pl-s"><span class="pl-pds">'</span>Content-Type<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>application/x-amz-json-1.0<span class="pl-pds">'</span></span>,
    <span class="pl-s"><span class="pl-pds">'</span>X-Amz-Target<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>DynamoDB_20120810.ListTables<span class="pl-pds">'</span></span>
  },
  body<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>{}<span class="pl-pds">'</span></span>
}))
<span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">{&quot;TableNames&quot;:[]}</span>
<span class="pl-c">...</span>
<span class="pl-c"><span class="pl-c">*/</span></span>

<span class="pl-c"><span class="pl-c">//</span> works with all other services that support Signature Version 4</span>

<span class="pl-en">request</span>(<span class="pl-smi">aws4</span>.<span class="pl-en">sign</span>({service<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>s3<span class="pl-pds">'</span></span>, path<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>/<span class="pl-pds">'</span></span>, signQuery<span class="pl-k">:</span> <span class="pl-c1">true</span>}))
<span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">&lt;ListAllMyBucketsResult xmlns=&quot;http://s3.amazonaws.com/doc/2006-03-01/&quot;&gt;</span>
<span class="pl-c">...</span>
<span class="pl-c"><span class="pl-c">*/</span></span>

<span class="pl-en">request</span>(<span class="pl-smi">aws4</span>.<span class="pl-en">sign</span>({service<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>ec2<span class="pl-pds">'</span></span>, path<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>/?Action=DescribeRegions&amp;Version=2014-06-15<span class="pl-pds">'</span></span>}))
<span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">&lt;DescribeRegionsResponse xmlns=&quot;http://ec2.amazonaws.com/doc/2014-06-15/&quot;&gt;</span>
<span class="pl-c">...</span>
<span class="pl-c"><span class="pl-c">*/</span></span>

<span class="pl-en">request</span>(<span class="pl-smi">aws4</span>.<span class="pl-en">sign</span>({service<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>sns<span class="pl-pds">'</span></span>, path<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>/?Action=ListTopics&amp;Version=2010-03-31<span class="pl-pds">'</span></span>}))
<span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">&lt;ListTopicsResponse xmlns=&quot;http://sns.amazonaws.com/doc/2010-03-31/&quot;&gt;</span>
<span class="pl-c">...</span>
<span class="pl-c"><span class="pl-c">*/</span></span>

<span class="pl-en">request</span>(<span class="pl-smi">aws4</span>.<span class="pl-en">sign</span>({service<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>sts<span class="pl-pds">'</span></span>, path<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>/?Action=GetSessionToken&amp;Version=2011-06-15<span class="pl-pds">'</span></span>}))
<span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">&lt;GetSessionTokenResponse xmlns=&quot;https://sts.amazonaws.com/doc/2011-06-15/&quot;&gt;</span>
<span class="pl-c">...</span>
<span class="pl-c"><span class="pl-c">*/</span></span>

<span class="pl-en">request</span>(<span class="pl-smi">aws4</span>.<span class="pl-en">sign</span>({service<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>cloudsearch<span class="pl-pds">'</span></span>, path<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>/?Action=ListDomainNames&amp;Version=2013-01-01<span class="pl-pds">'</span></span>}))
<span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">&lt;ListDomainNamesResponse xmlns=&quot;http://cloudsearch.amazonaws.com/doc/2013-01-01/&quot;&gt;</span>
<span class="pl-c">...</span>
<span class="pl-c"><span class="pl-c">*/</span></span>

<span class="pl-en">request</span>(<span class="pl-smi">aws4</span>.<span class="pl-en">sign</span>({service<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>ses<span class="pl-pds">'</span></span>, path<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>/?Action=ListIdentities&amp;Version=2010-12-01<span class="pl-pds">'</span></span>}))
<span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">&lt;ListIdentitiesResponse xmlns=&quot;http://ses.amazonaws.com/doc/2010-12-01/&quot;&gt;</span>
<span class="pl-c">...</span>
<span class="pl-c"><span class="pl-c">*/</span></span>

<span class="pl-en">request</span>(<span class="pl-smi">aws4</span>.<span class="pl-en">sign</span>({service<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>autoscaling<span class="pl-pds">'</span></span>, path<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>/?Action=DescribeAutoScalingInstances&amp;Version=2011-01-01<span class="pl-pds">'</span></span>}))
<span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">&lt;DescribeAutoScalingInstancesResponse xmlns=&quot;http://autoscaling.amazonaws.com/doc/2011-01-01/&quot;&gt;</span>
<span class="pl-c">...</span>
<span class="pl-c"><span class="pl-c">*/</span></span>

<span class="pl-en">request</span>(<span class="pl-smi">aws4</span>.<span class="pl-en">sign</span>({service<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>elasticloadbalancing<span class="pl-pds">'</span></span>, path<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>/?Action=DescribeLoadBalancers&amp;Version=2012-06-01<span class="pl-pds">'</span></span>}))
<span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">&lt;DescribeLoadBalancersResponse xmlns=&quot;http://elasticloadbalancing.amazonaws.com/doc/2012-06-01/&quot;&gt;</span>
<span class="pl-c">...</span>
<span class="pl-c"><span class="pl-c">*/</span></span>

<span class="pl-en">request</span>(<span class="pl-smi">aws4</span>.<span class="pl-en">sign</span>({service<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>cloudformation<span class="pl-pds">'</span></span>, path<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>/?Action=ListStacks&amp;Version=2010-05-15<span class="pl-pds">'</span></span>}))
<span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">&lt;ListStacksResponse xmlns=&quot;http://cloudformation.amazonaws.com/doc/2010-05-15/&quot;&gt;</span>
<span class="pl-c">...</span>
<span class="pl-c"><span class="pl-c">*/</span></span>

<span class="pl-en">request</span>(<span class="pl-smi">aws4</span>.<span class="pl-en">sign</span>({service<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>elasticbeanstalk<span class="pl-pds">'</span></span>, path<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>/?Action=ListAvailableSolutionStacks&amp;Version=2010-12-01<span class="pl-pds">'</span></span>}))
<span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">&lt;ListAvailableSolutionStacksResponse xmlns=&quot;http://elasticbeanstalk.amazonaws.com/docs/2010-12-01/&quot;&gt;</span>
<span class="pl-c">...</span>
<span class="pl-c"><span class="pl-c">*/</span></span>

<span class="pl-en">request</span>(<span class="pl-smi">aws4</span>.<span class="pl-en">sign</span>({service<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>rds<span class="pl-pds">'</span></span>, path<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>/?Action=DescribeDBInstances&amp;Version=2012-09-17<span class="pl-pds">'</span></span>}))
<span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">&lt;DescribeDBInstancesResponse xmlns=&quot;http://rds.amazonaws.com/doc/2012-09-17/&quot;&gt;</span>
<span class="pl-c">...</span>
<span class="pl-c"><span class="pl-c">*/</span></span>

<span class="pl-en">request</span>(<span class="pl-smi">aws4</span>.<span class="pl-en">sign</span>({service<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>monitoring<span class="pl-pds">'</span></span>, path<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>/?Action=ListMetrics&amp;Version=2010-08-01<span class="pl-pds">'</span></span>}))
<span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">&lt;ListMetricsResponse xmlns=&quot;http://monitoring.amazonaws.com/doc/2010-08-01/&quot;&gt;</span>
<span class="pl-c">...</span>
<span class="pl-c"><span class="pl-c">*/</span></span>

<span class="pl-en">request</span>(<span class="pl-smi">aws4</span>.<span class="pl-en">sign</span>({service<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>redshift<span class="pl-pds">'</span></span>, path<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>/?Action=DescribeClusters&amp;Version=2012-12-01<span class="pl-pds">'</span></span>}))
<span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">&lt;DescribeClustersResponse xmlns=&quot;http://redshift.amazonaws.com/doc/2012-12-01/&quot;&gt;</span>
<span class="pl-c">...</span>
<span class="pl-c"><span class="pl-c">*/</span></span>

<span class="pl-en">request</span>(<span class="pl-smi">aws4</span>.<span class="pl-en">sign</span>({service<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>cloudfront<span class="pl-pds">'</span></span>, path<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>/2014-05-31/distribution<span class="pl-pds">'</span></span>}))
<span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">&lt;DistributionList xmlns=&quot;http://cloudfront.amazonaws.com/doc/2014-05-31/&quot;&gt;</span>
<span class="pl-c">...</span>
<span class="pl-c"><span class="pl-c">*/</span></span>

<span class="pl-en">request</span>(<span class="pl-smi">aws4</span>.<span class="pl-en">sign</span>({service<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>elasticache<span class="pl-pds">'</span></span>, path<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>/?Action=DescribeCacheClusters&amp;Version=2014-07-15<span class="pl-pds">'</span></span>}))
<span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">&lt;DescribeCacheClustersResponse xmlns=&quot;http://elasticache.amazonaws.com/doc/2014-07-15/&quot;&gt;</span>
<span class="pl-c">...</span>
<span class="pl-c"><span class="pl-c">*/</span></span>

<span class="pl-en">request</span>(<span class="pl-smi">aws4</span>.<span class="pl-en">sign</span>({service<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>elasticmapreduce<span class="pl-pds">'</span></span>, path<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>/?Action=DescribeJobFlows&amp;Version=2009-03-31<span class="pl-pds">'</span></span>}))
<span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">&lt;DescribeJobFlowsResponse xmlns=&quot;http://elasticmapreduce.amazonaws.com/doc/2009-03-31&quot;&gt;</span>
<span class="pl-c">...</span>
<span class="pl-c"><span class="pl-c">*/</span></span>

<span class="pl-en">request</span>(<span class="pl-smi">aws4</span>.<span class="pl-en">sign</span>({service<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>route53<span class="pl-pds">'</span></span>, path<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>/2013-04-01/hostedzone<span class="pl-pds">'</span></span>}))
<span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">&lt;ListHostedZonesResponse xmlns=&quot;https://route53.amazonaws.com/doc/2013-04-01/&quot;&gt;</span>
<span class="pl-c">...</span>
<span class="pl-c"><span class="pl-c">*/</span></span>

<span class="pl-en">request</span>(<span class="pl-smi">aws4</span>.<span class="pl-en">sign</span>({service<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>appstream<span class="pl-pds">'</span></span>, path<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>/applications<span class="pl-pds">'</span></span>}))
<span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">{&quot;_links&quot;:{&quot;curie&quot;:[{&quot;href&quot;:&quot;http://docs.aws.amazon.com/appstream/latest/...</span>
<span class="pl-c">...</span>
<span class="pl-c"><span class="pl-c">*/</span></span>

<span class="pl-en">request</span>(<span class="pl-smi">aws4</span>.<span class="pl-en">sign</span>({service<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>cognito-sync<span class="pl-pds">'</span></span>, path<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>/identitypools<span class="pl-pds">'</span></span>}))
<span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">{&quot;Count&quot;:0,&quot;IdentityPoolUsages&quot;:[],&quot;MaxResults&quot;:16,&quot;NextToken&quot;:null}</span>
<span class="pl-c">...</span>
<span class="pl-c"><span class="pl-c">*/</span></span>

<span class="pl-en">request</span>(<span class="pl-smi">aws4</span>.<span class="pl-en">sign</span>({service<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>elastictranscoder<span class="pl-pds">'</span></span>, path<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>/2012-09-25/pipelines<span class="pl-pds">'</span></span>}))
<span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">{&quot;NextPageToken&quot;:null,&quot;Pipelines&quot;:[]}</span>
<span class="pl-c">...</span>
<span class="pl-c"><span class="pl-c">*/</span></span>

<span class="pl-en">request</span>(<span class="pl-smi">aws4</span>.<span class="pl-en">sign</span>({service<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>lambda<span class="pl-pds">'</span></span>, path<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>/2014-11-13/functions/<span class="pl-pds">'</span></span>}))
<span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">{&quot;Functions&quot;:[],&quot;NextMarker&quot;:null}</span>
<span class="pl-c">...</span>
<span class="pl-c"><span class="pl-c">*/</span></span>

<span class="pl-en">request</span>(<span class="pl-smi">aws4</span>.<span class="pl-en">sign</span>({service<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>ecs<span class="pl-pds">'</span></span>, path<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>/?Action=ListClusters&amp;Version=2014-11-13<span class="pl-pds">'</span></span>}))
<span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">&lt;ListClustersResponse xmlns=&quot;http://ecs.amazonaws.com/doc/2014-11-13/&quot;&gt;</span>
<span class="pl-c">...</span>
<span class="pl-c"><span class="pl-c">*/</span></span>

<span class="pl-en">request</span>(<span class="pl-smi">aws4</span>.<span class="pl-en">sign</span>({service<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>glacier<span class="pl-pds">'</span></span>, path<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>/-/vaults<span class="pl-pds">'</span></span>, headers<span class="pl-k">:</span> {<span class="pl-s"><span class="pl-pds">'</span>X-Amz-Glacier-Version<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>2012-06-01<span class="pl-pds">'</span></span>}}))
<span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">{&quot;Marker&quot;:null,&quot;VaultList&quot;:[]}</span>
<span class="pl-c">...</span>
<span class="pl-c"><span class="pl-c">*/</span></span>

<span class="pl-en">request</span>(<span class="pl-smi">aws4</span>.<span class="pl-en">sign</span>({service<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>storagegateway<span class="pl-pds">'</span></span>, body<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>{}<span class="pl-pds">'</span></span>, headers<span class="pl-k">:</span> {
  <span class="pl-s"><span class="pl-pds">'</span>Content-Type<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>application/x-amz-json-1.1<span class="pl-pds">'</span></span>,
  <span class="pl-s"><span class="pl-pds">'</span>X-Amz-Target<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>StorageGateway_20120630.ListGateways<span class="pl-pds">'</span></span>
}}))
<span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">{&quot;Gateways&quot;:[]}</span>
<span class="pl-c">...</span>
<span class="pl-c"><span class="pl-c">*/</span></span>

<span class="pl-en">request</span>(<span class="pl-smi">aws4</span>.<span class="pl-en">sign</span>({service<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>datapipeline<span class="pl-pds">'</span></span>, body<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>{}<span class="pl-pds">'</span></span>, headers<span class="pl-k">:</span> {
  <span class="pl-s"><span class="pl-pds">'</span>Content-Type<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>application/x-amz-json-1.1<span class="pl-pds">'</span></span>,
  <span class="pl-s"><span class="pl-pds">'</span>X-Amz-Target<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>DataPipeline.ListPipelines<span class="pl-pds">'</span></span>
}}))
<span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">{&quot;hasMoreResults&quot;:false,&quot;pipelineIdList&quot;:[]}</span>
<span class="pl-c">...</span>
<span class="pl-c"><span class="pl-c">*/</span></span>

<span class="pl-en">request</span>(<span class="pl-smi">aws4</span>.<span class="pl-en">sign</span>({service<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>opsworks<span class="pl-pds">'</span></span>, body<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>{}<span class="pl-pds">'</span></span>, headers<span class="pl-k">:</span> {
  <span class="pl-s"><span class="pl-pds">'</span>Content-Type<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>application/x-amz-json-1.1<span class="pl-pds">'</span></span>,
  <span class="pl-s"><span class="pl-pds">'</span>X-Amz-Target<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>OpsWorks_20130218.DescribeStacks<span class="pl-pds">'</span></span>
}}))
<span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">{&quot;Stacks&quot;:[]}</span>
<span class="pl-c">...</span>
<span class="pl-c"><span class="pl-c">*/</span></span>

<span class="pl-en">request</span>(<span class="pl-smi">aws4</span>.<span class="pl-en">sign</span>({service<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>route53domains<span class="pl-pds">'</span></span>, body<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>{}<span class="pl-pds">'</span></span>, headers<span class="pl-k">:</span> {
  <span class="pl-s"><span class="pl-pds">'</span>Content-Type<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>application/x-amz-json-1.1<span class="pl-pds">'</span></span>,
  <span class="pl-s"><span class="pl-pds">'</span>X-Amz-Target<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>Route53Domains_v20140515.ListDomains<span class="pl-pds">'</span></span>
}}))
<span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">{&quot;Domains&quot;:[]}</span>
<span class="pl-c">...</span>
<span class="pl-c"><span class="pl-c">*/</span></span>

<span class="pl-en">request</span>(<span class="pl-smi">aws4</span>.<span class="pl-en">sign</span>({service<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>kinesis<span class="pl-pds">'</span></span>, body<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>{}<span class="pl-pds">'</span></span>, headers<span class="pl-k">:</span> {
  <span class="pl-s"><span class="pl-pds">'</span>Content-Type<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>application/x-amz-json-1.1<span class="pl-pds">'</span></span>,
  <span class="pl-s"><span class="pl-pds">'</span>X-Amz-Target<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>Kinesis_20131202.ListStreams<span class="pl-pds">'</span></span>
}}))
<span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">{&quot;HasMoreStreams&quot;:false,&quot;StreamNames&quot;:[]}</span>
<span class="pl-c">...</span>
<span class="pl-c"><span class="pl-c">*/</span></span>

<span class="pl-en">request</span>(<span class="pl-smi">aws4</span>.<span class="pl-en">sign</span>({service<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>cloudtrail<span class="pl-pds">'</span></span>, body<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>{}<span class="pl-pds">'</span></span>, headers<span class="pl-k">:</span> {
  <span class="pl-s"><span class="pl-pds">'</span>Content-Type<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>application/x-amz-json-1.1<span class="pl-pds">'</span></span>,
  <span class="pl-s"><span class="pl-pds">'</span>X-Amz-Target<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>CloudTrail_20131101.DescribeTrails<span class="pl-pds">'</span></span>
}}))
<span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">{&quot;trailList&quot;:[]}</span>
<span class="pl-c">...</span>
<span class="pl-c"><span class="pl-c">*/</span></span>

<span class="pl-en">request</span>(<span class="pl-smi">aws4</span>.<span class="pl-en">sign</span>({service<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>logs<span class="pl-pds">'</span></span>, body<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>{}<span class="pl-pds">'</span></span>, headers<span class="pl-k">:</span> {
  <span class="pl-s"><span class="pl-pds">'</span>Content-Type<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>application/x-amz-json-1.1<span class="pl-pds">'</span></span>,
  <span class="pl-s"><span class="pl-pds">'</span>X-Amz-Target<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>Logs_20140328.DescribeLogGroups<span class="pl-pds">'</span></span>
}}))
<span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">{&quot;logGroups&quot;:[]}</span>
<span class="pl-c">...</span>
<span class="pl-c"><span class="pl-c">*/</span></span>

<span class="pl-en">request</span>(<span class="pl-smi">aws4</span>.<span class="pl-en">sign</span>({service<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>codedeploy<span class="pl-pds">'</span></span>, body<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>{}<span class="pl-pds">'</span></span>, headers<span class="pl-k">:</span> {
  <span class="pl-s"><span class="pl-pds">'</span>Content-Type<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>application/x-amz-json-1.1<span class="pl-pds">'</span></span>,
  <span class="pl-s"><span class="pl-pds">'</span>X-Amz-Target<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>CodeDeploy_20141006.ListApplications<span class="pl-pds">'</span></span>
}}))
<span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">{&quot;applications&quot;:[]}</span>
<span class="pl-c">...</span>
<span class="pl-c"><span class="pl-c">*/</span></span>

<span class="pl-en">request</span>(<span class="pl-smi">aws4</span>.<span class="pl-en">sign</span>({service<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>directconnect<span class="pl-pds">'</span></span>, body<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>{}<span class="pl-pds">'</span></span>, headers<span class="pl-k">:</span> {
  <span class="pl-s"><span class="pl-pds">'</span>Content-Type<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>application/x-amz-json-1.1<span class="pl-pds">'</span></span>,
  <span class="pl-s"><span class="pl-pds">'</span>X-Amz-Target<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>OvertureService.DescribeConnections<span class="pl-pds">'</span></span>
}}))
<span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">{&quot;connections&quot;:[]}</span>
<span class="pl-c">...</span>
<span class="pl-c"><span class="pl-c">*/</span></span>

<span class="pl-en">request</span>(<span class="pl-smi">aws4</span>.<span class="pl-en">sign</span>({service<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>kms<span class="pl-pds">'</span></span>, body<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>{}<span class="pl-pds">'</span></span>, headers<span class="pl-k">:</span> {
  <span class="pl-s"><span class="pl-pds">'</span>Content-Type<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>application/x-amz-json-1.1<span class="pl-pds">'</span></span>,
  <span class="pl-s"><span class="pl-pds">'</span>X-Amz-Target<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>TrentService.ListKeys<span class="pl-pds">'</span></span>
}}))
<span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">{&quot;Keys&quot;:[],&quot;Truncated&quot;:false}</span>
<span class="pl-c">...</span>
<span class="pl-c"><span class="pl-c">*/</span></span>

<span class="pl-en">request</span>(<span class="pl-smi">aws4</span>.<span class="pl-en">sign</span>({service<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>config<span class="pl-pds">'</span></span>, body<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>{}<span class="pl-pds">'</span></span>, headers<span class="pl-k">:</span> {
  <span class="pl-s"><span class="pl-pds">'</span>Content-Type<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>application/x-amz-json-1.1<span class="pl-pds">'</span></span>,
  <span class="pl-s"><span class="pl-pds">'</span>X-Amz-Target<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>StarlingDoveService.DescribeDeliveryChannels<span class="pl-pds">'</span></span>
}}))
<span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">{&quot;DeliveryChannels&quot;:[]}</span>
<span class="pl-c">...</span>
<span class="pl-c"><span class="pl-c">*/</span></span>

<span class="pl-en">request</span>(<span class="pl-smi">aws4</span>.<span class="pl-en">sign</span>({service<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>cloudhsm<span class="pl-pds">'</span></span>, body<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>{}<span class="pl-pds">'</span></span>, headers<span class="pl-k">:</span> {
  <span class="pl-s"><span class="pl-pds">'</span>Content-Type<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>application/x-amz-json-1.1<span class="pl-pds">'</span></span>,
  <span class="pl-s"><span class="pl-pds">'</span>X-Amz-Target<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>CloudHsmFrontendService.ListAvailableZones<span class="pl-pds">'</span></span>
}}))
<span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">{&quot;AZList&quot;:[&quot;us-east-1a&quot;,&quot;us-east-1b&quot;,&quot;us-east-1c&quot;]}</span>
<span class="pl-c">...</span>
<span class="pl-c"><span class="pl-c">*/</span></span>

<span class="pl-en">request</span>(<span class="pl-smi">aws4</span>.<span class="pl-en">sign</span>({
  service<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>swf<span class="pl-pds">'</span></span>,
  body<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>{&quot;registrationStatus&quot;:&quot;REGISTERED&quot;}<span class="pl-pds">'</span></span>,
  headers<span class="pl-k">:</span> {
    <span class="pl-s"><span class="pl-pds">'</span>Content-Type<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>application/x-amz-json-1.0<span class="pl-pds">'</span></span>,
    <span class="pl-s"><span class="pl-pds">'</span>X-Amz-Target<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>SimpleWorkflowService.ListDomains<span class="pl-pds">'</span></span>
  }
}))
<span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">{&quot;domainInfos&quot;:[]}</span>
<span class="pl-c">...</span>
<span class="pl-c"><span class="pl-c">*/</span></span>

<span class="pl-en">request</span>(<span class="pl-smi">aws4</span>.<span class="pl-en">sign</span>({
  service<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>cognito-identity<span class="pl-pds">'</span></span>,
  body<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>{&quot;MaxResults&quot;: 1}<span class="pl-pds">'</span></span>,
  headers<span class="pl-k">:</span> {
    <span class="pl-s"><span class="pl-pds">'</span>Content-Type<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>application/x-amz-json-1.1<span class="pl-pds">'</span></span>,
    <span class="pl-s"><span class="pl-pds">'</span>X-Amz-Target<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>AWSCognitoIdentityService.ListIdentityPools<span class="pl-pds">'</span></span>
  }
}))
<span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">{&quot;IdentityPools&quot;:[]}</span>
<span class="pl-c">...</span>
<span class="pl-c"><span class="pl-c">*/</span></span>

<span class="pl-en">request</span>(<span class="pl-smi">aws4</span>.<span class="pl-en">sign</span>({
  service<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>mobileanalytics<span class="pl-pds">'</span></span>,
  path<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>/2014-06-05/events<span class="pl-pds">'</span></span>,
  body<span class="pl-k">:</span> <span class="pl-c1">JSON</span>.<span class="pl-c1">stringify</span>({events<span class="pl-k">:</span>[{
    eventType<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>a<span class="pl-pds">'</span></span>,
    timestamp<span class="pl-k">:</span> <span class="pl-k">new</span> <span class="pl-en">Date</span>().<span class="pl-en">toISOString</span>(),
    session<span class="pl-k">:</span> {},
  }]}),
  headers<span class="pl-k">:</span> {
    <span class="pl-s"><span class="pl-pds">'</span>Content-Type<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>application/json<span class="pl-pds">'</span></span>,
    <span class="pl-s"><span class="pl-pds">'</span>X-Amz-Client-Context<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-c1">JSON</span>.<span class="pl-c1">stringify</span>({
      client<span class="pl-k">:</span> {client_id<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>a<span class="pl-pds">'</span></span>, app_title<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>a<span class="pl-pds">'</span></span>},
      custom<span class="pl-k">:</span> {},
      env<span class="pl-k">:</span> {platform<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>a<span class="pl-pds">'</span></span>},
      services<span class="pl-k">:</span> {},
    }),
  }
}))
<span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">(HTTP 202, empty response)</span>
<span class="pl-c"><span class="pl-c">*/</span></span>

<span class="pl-c"><span class="pl-c">//</span> Generate CodeCommit Git access password</span>
<span class="pl-k">var</span> signer <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">aws4.RequestSigner</span>({
  service<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>codecommit<span class="pl-pds">'</span></span>,
  host<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>git-codecommit.us-east-1.amazonaws.com<span class="pl-pds">'</span></span>,
  method<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>GIT<span class="pl-pds">'</span></span>,
  path<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>/v1/repos/MyAwesomeRepo<span class="pl-pds">'</span></span>,
})
<span class="pl-k">var</span> password <span class="pl-k">=</span> <span class="pl-smi">signer</span>.<span class="pl-en">getDateTime</span>() <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">'</span>Z<span class="pl-pds">'</span></span> <span class="pl-k">+</span> <span class="pl-smi">signer</span>.<span class="pl-en">signature</span>()</pre>
</div> 
<h2> <a id="user-content-api" class="anchor" href="#api" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>API</h2> 
<h3> <a id="user-content-aws4signrequestoptions-credentials" class="anchor" href="#aws4signrequestoptions-credentials" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>aws4.sign(requestOptions, [credentials])</h3> 
<p>This calculates and populates the <code>Authorization</code> header of <code>requestOptions</code>, and any other necessary AWS headers and/or request options. Returns <code>requestOptions</code> as a convenience for chaining.</p> 
<p><code>requestOptions</code> is an object holding the same options that the node.js <a href="http://nodejs.org/docs/latest/api/http.html#http_http_request_options_callback" rel="nofollow">http.request</a> function takes.</p> 
<p>The following properties of <code>requestOptions</code> are used in the signing or populated if they don't already exist:</p> 
<ul> 
 <li> <code>hostname</code> or <code>host</code> (will be determined from <code>service</code> and <code>region</code> if not given)</li> 
 <li> <code>method</code> (will use <code>'GET'</code> if not given or <code>'POST'</code> if there is a <code>body</code>)</li> 
 <li> <code>path</code> (will use <code>'/'</code> if not given)</li> 
 <li> <code>body</code> (will use <code>''</code> if not given)</li> 
 <li> <code>service</code> (will be calculated from <code>hostname</code> or <code>host</code> if not given)</li> 
 <li> <code>region</code> (will be calculated from <code>hostname</code> or <code>host</code> or use <code>'us-east-1'</code> if not given)</li> 
 <li> <code>headers['Host']</code> (will use <code>hostname</code> or <code>host</code> or be calculated if not given)</li> 
 <li> <code>headers['Content-Type']</code> (will use <code>'application/x-www-form-urlencoded; charset=utf-8'</code> if not given and there is a <code>body</code>)</li> 
 <li> <code>headers['Date']</code> (used to calculate the signature date if given, otherwise <code>new Date</code> is used)</li> 
</ul> 
<p>Your AWS credentials (which can be found in your <a href="https://portal.aws.amazon.com/gp/aws/securityCredentials" rel="nofollow">AWS console</a>) can be specified in one of two ways:</p> 
<ul> 
 <li>As the second argument, like this:</li> 
</ul> 
<div class="highlight highlight-source-js">
 <pre><span class="pl-smi">aws4</span>.<span class="pl-en">sign</span>(requestOptions, {
  secretAccessKey<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">&quot;</span>&lt;your-secret-access-key&gt;<span class="pl-pds">&quot;</span></span>,
  accessKeyId<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">&quot;</span>&lt;your-access-key-id&gt;<span class="pl-pds">&quot;</span></span>,
  sessionToken<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">&quot;</span>&lt;your-session-token&gt;<span class="pl-pds">&quot;</span></span>
})</pre>
</div> 
<ul> 
 <li>From <code>process.env</code>, such as this:</li> 
</ul> 
<pre><code>export AWS_SECRET_ACCESS_KEY=&quot;&lt;your-secret-access-key&gt;&quot;
export AWS_ACCESS_KEY_ID=&quot;&lt;your-access-key-id&gt;&quot;
export AWS_SESSION_TOKEN=&quot;&lt;your-session-token&gt;&quot;
</code></pre> 
<p>(will also use <code>AWS_ACCESS_KEY</code> and <code>AWS_SECRET_KEY</code> if available)</p> 
<p>The <code>sessionToken</code> property and <code>AWS_SESSION_TOKEN</code> environment variable are optional for signing with <a href="http://docs.aws.amazon.com/STS/latest/UsingSTS/using-temp-creds.html" rel="nofollow">IAM STS temporary credentials</a>.</p> 
<h2> <a id="user-content-installation" class="anchor" href="#installation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Installation</h2> 
<p>With <a href="http://npmjs.org/" rel="nofollow">npm</a> do:</p> 
<pre><code>npm install aws4
</code></pre> 
<p>Can also be used <a href=".\.browser.md.html">in the browser</a>.</p> 
<h2> <a id="user-content-thanks" class="anchor" href="#thanks" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Thanks</h2> 
<p>Thanks to <a href="https://github.com/jed">@jed</a> for his <a href="https://github.com/jed/dynamo-client">dynamo-client</a> lib where I first committed and subsequently extracted this code.</p> 
<p>Also thanks to the <a href="https://github.com/aws/aws-sdk-js">official node.js AWS SDK</a> for giving me a start on implementing the v4 signature.</p>
</body>
</html>
